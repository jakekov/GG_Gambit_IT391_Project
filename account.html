
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GG Gambit</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    body {
      text-align: center;
      padding: 40px;
      background-image: url('https://cdna.artstation.com/p/assets/images/images/026/878/440/large/dmitry-slivin-.jpg?1589980281');
      background-size: cover;
      background-position: center;
      font-family: Arial, sans-serif;
      color: whitesmoke;
    }

    h1 {
      margin-bottom: 30px;
      color: whitesmoke;
    }

    .agent-option {
      display: inline-block;
      margin: 10px;
      text-align: center;
    }

    .agent-option input {
      display: none;
    }

    .modal-body {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
      gap: 15px;
      justify-items: center;
      max-height: 60vh; /* keeps modal from being too tall */
      overflow-y: auto; /* enables scrolling if too many avatars */
      padding: 20px;
    }

    .agent-option img {
      width: 100%;
      max-width: 100px;
      height: auto;
      border-radius: 50%;
      border: 3px solid transparent;
      cursor: pointer;
      transition: border 0.2s, transform 0.2s;
    }

    .agent-option img:hover {
      transform: scale(1.05);
    }

    .agent-option input:checked + img {
      border-color: #00bcd4;
    }

    #profileCard {
      background: #1a1a1a;
      border-radius: 12px;
      padding: 20px;
      margin: auto;
      width: 250px;
      box-shadow: 0 0 15px rgba(0,188,212,0.5);
      transition: box-shadow 0.3s;
    }

    #avatarPreview img {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      border: 3px solid #00bcd4;
      margin-top: 10px;
      transition: transform 0.3s ease, opacity 0.3s ease;
    }

    #avatarPreview.saved img {
      animation: pulse 1s;
    }

    @keyframes pulse {
      0% { box-shadow: 0 0 0 0 rgba(0,188,212,0.7); }
      70% { box-shadow: 0 0 0 15px rgba(0,188,212,0); }
      100% { box-shadow: 0 0 0 0 rgba(0,188,212,0); }
    }

    .modal-content {
      background-color: #1a1a1a;
      color: whitesmoke;
    }

    .modal-header, .modal-footer {
      border-color: #333;
    }

    .toast-container {
      position: fixed;
      bottom: 1rem;
      right: 1rem;
      z-index: 9999;
    }
  </style>
</head>
<body>
  <form id="profileForm">
    <!-- Username Input -->
    <div class="mb-4">
      <label for="username" class="form-label fs-5">Enter Your Username:</label><br>
      <input type="text" id="username" name="username" class="form-control mx-auto text-center" style="max-width:300px;" placeholder="Enter Username" required>
    </div>

    <!-- Profile Card -->
    <div id="profileCard">
      <h5>Profile Preview</h5>
      <div id="avatarPreview">
        <img src="https://cdn-icons-png.flaticon.com/512/847/847969.png" alt="Default Avatar">
      </div>
      <p id="usernamePreview" class="mt-2 fs-5">No Username</p>
      <button type="button" class="btn btn-outline-info mt-3" data-bs-toggle="modal" data-bs-target="#avatarModal">
        Change Avatar Picture
      </button>
    </div>

    <!-- Save and Reset -->
    <div class="mt-4">
      <button type="submit" class="btn btn-primary me-2">Save Profile</button>
      <button type="button" id="resetProfile" class="btn btn-danger">Reset Profile</button>
    </div>
  </form>

  <!-- Modal for Avatar Selection -->
  <div class="modal fade" id="avatarModal" tabindex="-1" aria-labelledby="avatarModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="avatarModalLabel">Select Your Avatar</h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body text-center">
          <div class="agent-option">
            <label>
              <input type="radio" name="avatar" value="https://cmsassets.rgpub.io/sanity/images/dsfx7636/news/51e62f3c74356a7501d06feba42ac643133257d7-616x822.png?auto=format&fit=fill&q=80&w=616">
              <img src="https://cmsassets.rgpub.io/sanity/images/dsfx7636/news/51e62f3c74356a7501d06feba42ac643133257d7-616x822.png?auto=format&fit=fill&q=80&w=616" alt="Brimstone" title="Brimstone">
            </label>
          </div>
          <div class="agent-option">
            <label>
              <input type="radio" name="avatar" value="https://cmsassets.rgpub.io/sanity/images/dsfx7636/news/58a180961a14beb631877921e647c233804853c1-616x822.png?auto=format&fit=fill&q=80&w=616">
              <img src="https://cmsassets.rgpub.io/sanity/images/dsfx7636/news/58a180961a14beb631877921e647c233804853c1-616x822.png?auto=format&fit=fill&q=80&w=616" alt="Sage" title="Sage">
            </label>
          </div>
          <div class="agent-option">
            <label>
              <input type="radio" name="avatar" value="https://cmsassets.rgpub.io/sanity/images/dsfx7636/news/152244f121e61ca32bdd2bea9fc5370e315664fb-616x822.png?auto=format&fit=fill&q=80&w=616">
              <img src="https://cmsassets.rgpub.io/sanity/images/dsfx7636/news/152244f121e61ca32bdd2bea9fc5370e315664fb-616x822.png?auto=format&fit=fill&q=80&w=616" alt="Viper" title="Viper">
            </label>
          </div>
          <div class="agent-option">
            <label>
              <input type="radio" name="avatar" value="https://cmsassets.rgpub.io/sanity/images/dsfx7636/news/7cb513c9b3eae3286449776e85753138436d553c-616x822.png?auto=format&fit=fill&q=80&w=616">
              <img src="https://cmsassets.rgpub.io/sanity/images/dsfx7636/news/7cb513c9b3eae3286449776e85753138436d553c-616x822.png?auto=format&fit=fill&q=80&w=616" alt="Reyna" title="Reyna">
            </label>
          </div>
          <div class="agent-option">
            <label>
              <input type="radio" name="avatar" value="https://cmsassets.rgpub.io/sanity/images/dsfx7636/news/d41286dc9017bf79c0b4d907b7a260c27b0adb69-616x822.png?auto=format&fit=fill&q=80&w=616">
              <img src="https://cmsassets.rgpub.io/sanity/images/dsfx7636/news/d41286dc9017bf79c0b4d907b7a260c27b0adb69-616x822.png?auto=format&fit=fill&q=80&w=616" alt="Jett" title="Jett">
            </label>
          </div>
          <div class="agent-option">
            <label>
              <input type="radio" name="avatar" value="https://cmsassets.rgpub.io/sanity/images/dsfx7636/news/05e1a996814dd10d7179efee327d29a7be00e912-616x822.png?auto=format&fit=fill&q=80&w=616">
              <img src="https://cmsassets.rgpub.io/sanity/images/dsfx7636/news/05e1a996814dd10d7179efee327d29a7be00e912-616x822.png?auto=format&fit=fill&q=80&w=616" alt="Yoru" title="Yoru">
            </label>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Toast Container -->
  <div class="toast-container">
    <div id="toast" class="toast align-items-center text-white bg-success border-0" role="alert">
      <div class="d-flex">
        <div class="toast-body" id="toastMessage"></div>
        <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    const avatarInputs = document.querySelectorAll('input[name="avatar"]');
    const avatarPreview = document.getElementById('avatarPreview');
    const usernameInput = document.getElementById('username');
    const usernamePreview = document.getElementById('usernamePreview');
    const resetButton = document.getElementById('resetProfile');
    const form = document.getElementById('profileForm');
    const toastEl = document.getElementById('toast');
    const toastMessage = document.getElementById('toastMessage');
    const toast = new bootstrap.Toast(toastEl);

    const defaultAvatar = "https://cdn-icons-png.flaticon.com/512/847/847969.png";

    // Load saved profile
    window.addEventListener('DOMContentLoaded', () => {
    const savedUsername = localStorage.getItem('username');
    const savedAvatar = localStorage.getItem('avatar');

    // If no avatar saved, set default
    if (!savedAvatar) {
      const defaultAvatar = "https://cdn-icons-png.flaticon.com/512/847/847969.png";
      localStorage.setItem('avatar', defaultAvatar);
      avatarPreview.innerHTML = `<img src="${defaultAvatar}" alt="Default Avatar">`;
    } else {
      avatarPreview.innerHTML = `<img src="${savedAvatar}" alt="Saved Avatar">`;
      avatarInputs.forEach(input => {
        if (input.value === savedAvatar) input.checked = true;
      });
    }

    if (savedUsername) {
      usernameInput.value = savedUsername;
      usernamePreview.textContent = savedUsername;
    }
  });


    // Avatar selection
    avatarInputs.forEach(input => {
      input.addEventListener('change', () => {
        avatarPreview.innerHTML = `<img src="${input.value}" alt="Selected Avatar">`;
        avatarPreview.classList.add('saved');
        setTimeout(() => avatarPreview.classList.remove('saved'), 1000);
        localStorage.setItem('avatar', input.value);

        const modal = bootstrap.Modal.getInstance(document.getElementById('avatarModal'));
        modal.hide();

        showToast("Avatar updated!");
      });
    });

    // Username input
    usernameInput.addEventListener('input', () => {
      const value = usernameInput.value.trim();
      usernamePreview.textContent = value || "No Username";
      localStorage.setItem('username', value);
    });

    // Save Profile
    form.addEventListener('submit', e => {
      e.preventDefault();
      if(!localStorage.getItem('avatar')) {
        const avatars = [...avatarInputs].map(a=>a.value);
        const randomAvatar = avatars[Math.floor(Math.random() * avatars.length)];
        localStorage.setItem('avatar', randomAvatar);
        avatarPreview.innerHTML = `<img src="${randomAvatar}" alt="Random Avatar">`;
      }
      showToast("Profile saved!");
    });

    // Reset Profile
    resetButton.addEventListener('click', () => {
      if(confirm("Are you sure you want to reset your profile?")) {
        localStorage.clear();
        usernameInput.value = "";
        usernamePreview.textContent = "No Username";
        avatarPreview.innerHTML = `<img src="${defaultAvatar}" alt="Default Avatar">`;
        avatarInputs.forEach(input => input.checked = false);
        showToast("Profile reset!");
      }
    });

    // Toast helper
    function showToast(msg) {
      toastMessage.textContent = msg;
      toast.show();
    }
  </script>
</body>
</html>
